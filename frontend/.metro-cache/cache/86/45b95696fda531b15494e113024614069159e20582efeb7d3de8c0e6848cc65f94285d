{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  /**\n   * If you want to provide a custom regexp, this is the configuration to use.\n   * -- For historical reasons, all regexps are processed as if they have the global flag set.\n   * -- Use the nonExhaustiveModeMaxMatchCount property to match a limited number of matches.\n   * Note: any additional keys/props are permitted, and will be returned as-is!\n   * @typedef {Object} CustomParseShape\n   * @property {RegExp} pattern\n   * @property {number} [nonExhaustiveModeMaxMatchCount] Enables \"non-exhaustive mode\", where you can limit how many matches are found. -- Must be a positive integer or Infinity matches are permitted\n   * @property {Function} [renderText] arbitrary function to rewrite the matched string into something else\n   * @property {Function} [onPress]\n   * @property {Function} [onLongPress]\n   */\n  /**\n   * Class to encapsulate the business logic of converting text into matches & props\n   */\n  class TextExtraction {\n    /**\n     * @param {String} text - Text to be parsed\n     * @param {CustomParseShape[]} patterns - Patterns to be used when parsed,\n     *                                 any extra attributes, will be returned from parse()\n     */\n    constructor(text, patterns) {\n      this.text = text;\n      this.patterns = patterns || [];\n    }\n\n    /**\n     * Returns parts of the text with their own props\n     * @public\n     * @return {Object[]} - props for all the parts of the text\n     */\n    parse() {\n      let parsedTexts = [{\n        children: this.text\n      }];\n      this.patterns.forEach(pattern => {\n        let newParts = [];\n        const tmp = pattern.nonExhaustiveModeMaxMatchCount || 0;\n        const numberOfMatchesPermitted = Math.min(Math.max(Number.isInteger(tmp) ? tmp : 0, 0) || Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY);\n        let currentMatches = 0;\n        parsedTexts.forEach(parsedText => {\n          // Only allow for now one parsing\n          if (parsedText._matched) {\n            newParts.push(parsedText);\n            return;\n          }\n          let parts = [];\n          let textLeft = parsedText.children;\n          let indexOfMatchedString = 0;\n\n          /** @type {RegExpExecArray} */\n          let matches;\n          // Global RegExps are stateful, this makes it start at 0 if reused\n          // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/exec\n          pattern.pattern.lastIndex = 0;\n          while (textLeft && (matches = pattern.pattern.exec(textLeft))) {\n            let previousText = textLeft.substr(0, matches.index);\n            indexOfMatchedString = matches.index;\n            if (++currentMatches > numberOfMatchesPermitted) {\n              // Abort if we've exhausted our number of matches\n              break;\n            }\n            parts.push({\n              children: previousText\n            });\n            parts.push(this.getMatchedPart(pattern, matches[0], matches, indexOfMatchedString));\n            textLeft = textLeft.substr(matches.index + matches[0].length);\n            indexOfMatchedString += matches[0].length - 1;\n            // Global RegExps are stateful, this makes it operate on the \"remainder\" of the string\n            pattern.pattern.lastIndex = 0;\n          }\n          parts.push({\n            children: textLeft\n          });\n          newParts.push(...parts);\n        });\n        parsedTexts = newParts;\n      });\n\n      // Remove _matched key.\n      parsedTexts.forEach(parsedText => delete parsedText._matched);\n      return parsedTexts.filter(t => !!t.children);\n    }\n\n    // private\n\n    /**\n     * @protected\n     * @param {ParseShape} matchedPattern - pattern configuration of the pattern used to match the text\n     * @param {String} text - Text matching the pattern\n     * @param {String[]} matches - Result of the RegExp.exec\n     * @param {Integer} index - Index of the matched string in the whole string\n     * @return {Object} props for the matched text\n     */\n    getMatchedPart(matchedPattern, text, matches, index) {\n      let props = {};\n      Object.keys(matchedPattern).forEach(key => {\n        if (key === 'pattern' || key === 'renderText' || key === 'nonExhaustiveModeMaxMatchCount') {\n          return;\n        }\n        if (typeof matchedPattern[key] === 'function') {\n          // Support onPress / onLongPress functions\n          props[key] = () => matchedPattern[key](text, index);\n        } else {\n          // Set a prop with an arbitrary name to the value in the match-config\n          props[key] = matchedPattern[key];\n        }\n      });\n      let children = text;\n      if (matchedPattern.renderText && typeof matchedPattern.renderText === 'function') {\n        children = matchedPattern.renderText(text, matches);\n      }\n      return {\n        ...props,\n        children: children,\n        _matched: true\n      };\n    }\n  }\n  var _default = TextExtraction;\n});","lineCount":133,"map":[[7,2,149,0,"Object"],[7,8,149,0],[7,9,149,0,"defineProperty"],[7,23,149,0],[7,24,149,0,"exports"],[7,31,149,0],[8,4,149,0,"enumerable"],[8,14,149,0],[9,4,149,0,"get"],[9,7,149,0],[9,18,149,0,"get"],[9,19,149,0],[10,6,149,0],[10,13,149,0,"_default"],[10,21,149,0],[11,4,149,0],[12,2,149,0],[13,2,1,0],[14,0,2,0],[15,0,3,0],[16,0,4,0],[17,0,5,0],[18,0,6,0],[19,0,7,0],[20,0,8,0],[21,0,9,0],[22,0,10,0],[23,0,11,0],[24,0,12,0],[25,2,13,0],[26,0,14,0],[27,0,15,0],[28,2,16,0],[28,8,16,6,"TextExtraction"],[28,22,16,20],[28,23,16,21],[29,4,17,2],[30,0,18,0],[31,0,19,0],[32,0,20,0],[33,0,21,0],[34,4,22,2,"constructor"],[34,15,22,13,"constructor"],[34,16,22,14,"text"],[34,20,22,18],[34,22,22,20,"patterns"],[34,30,22,28],[34,32,22,30],[35,6,23,4],[35,10,23,8],[35,11,23,9,"text"],[35,15,23,13],[35,18,23,16,"text"],[35,22,23,20],[36,6,24,4],[36,10,24,8],[36,11,24,9,"patterns"],[36,19,24,17],[36,22,24,20,"patterns"],[36,30,24,28],[36,34,24,32],[36,36,24,34],[37,4,25,2],[39,4,27,2],[40,0,28,0],[41,0,29,0],[42,0,30,0],[43,0,31,0],[44,4,32,2,"parse"],[44,9,32,7,"parse"],[44,10,32,7],[44,12,32,10],[45,6,33,4],[45,10,33,8,"parsedTexts"],[45,21,33,19],[45,24,33,22],[45,25,33,23],[46,8,33,25,"children"],[46,16,33,33],[46,18,33,35],[46,22,33,39],[46,23,33,40,"text"],[47,6,33,45],[47,7,33,46],[47,8,33,47],[48,6,34,4],[48,10,34,8],[48,11,34,9,"patterns"],[48,19,34,17],[48,20,34,18,"forEach"],[48,27,34,25],[48,28,34,27,"pattern"],[48,35,34,34],[48,39,34,39],[49,8,35,6],[49,12,35,10,"newParts"],[49,20,35,18],[49,23,35,21],[49,25,35,23],[50,8,37,6],[50,14,37,12,"tmp"],[50,17,37,15],[50,20,37,18,"pattern"],[50,27,37,25],[50,28,37,26,"nonExhaustiveModeMaxMatchCount"],[50,58,37,56],[50,62,37,60],[50,63,37,61],[51,8,38,6],[51,14,38,12,"numberOfMatchesPermitted"],[51,38,38,36],[51,41,38,39,"Math"],[51,45,38,43],[51,46,38,44,"min"],[51,49,38,47],[51,50,39,8,"Math"],[51,54,39,12],[51,55,39,13,"max"],[51,58,39,16],[51,59,39,17,"Number"],[51,65,39,23],[51,66,39,24,"isInteger"],[51,75,39,33],[51,76,39,34,"tmp"],[51,79,39,37],[51,80,39,38],[51,83,39,41,"tmp"],[51,86,39,44],[51,89,39,47],[51,90,39,48],[51,92,39,50],[51,93,39,51],[51,94,39,52],[51,98,40,10,"Number"],[51,104,40,16],[51,105,40,17,"POSITIVE_INFINITY"],[51,122,40,34],[51,124,41,8,"Number"],[51,130,41,14],[51,131,41,15,"POSITIVE_INFINITY"],[51,148,42,6],[51,149,42,7],[52,8,44,6],[52,12,44,10,"currentMatches"],[52,26,44,24],[52,29,44,27],[52,30,44,28],[53,8,46,6,"parsedTexts"],[53,19,46,17],[53,20,46,18,"forEach"],[53,27,46,25],[53,28,46,27,"parsedText"],[53,38,46,37],[53,42,46,42],[54,10,47,8],[55,10,48,8],[55,14,48,12,"parsedText"],[55,24,48,22],[55,25,48,23,"_matched"],[55,33,48,31],[55,35,48,33],[56,12,49,10,"newParts"],[56,20,49,18],[56,21,49,19,"push"],[56,25,49,23],[56,26,49,24,"parsedText"],[56,36,49,34],[56,37,49,35],[57,12,50,10],[58,10,51,8],[59,10,53,8],[59,14,53,12,"parts"],[59,19,53,17],[59,22,53,20],[59,24,53,22],[60,10,54,8],[60,14,54,12,"textLeft"],[60,22,54,20],[60,25,54,23,"parsedText"],[60,35,54,33],[60,36,54,34,"children"],[60,44,54,42],[61,10,55,8],[61,14,55,12,"indexOfMatchedString"],[61,34,55,32],[61,37,55,35],[61,38,55,36],[63,10,57,8],[64,10,58,8],[64,14,58,12,"matches"],[64,21,58,19],[65,10,59,8],[66,10,60,8],[67,10,61,8,"pattern"],[67,17,61,15],[67,18,61,16,"pattern"],[67,25,61,23],[67,26,61,24,"lastIndex"],[67,35,61,33],[67,38,61,36],[67,39,61,37],[68,10,62,8],[68,17,62,15,"textLeft"],[68,25,62,23],[68,30,62,28,"matches"],[68,37,62,35],[68,40,62,38,"pattern"],[68,47,62,45],[68,48,62,46,"pattern"],[68,55,62,53],[68,56,62,54,"exec"],[68,60,62,58],[68,61,62,59,"textLeft"],[68,69,62,67],[68,70,62,68],[68,71,62,69],[68,73,62,71],[69,12,63,10],[69,16,63,14,"previousText"],[69,28,63,26],[69,31,63,29,"textLeft"],[69,39,63,37],[69,40,63,38,"substr"],[69,46,63,44],[69,47,63,45],[69,48,63,46],[69,50,63,48,"matches"],[69,57,63,55],[69,58,63,56,"index"],[69,63,63,61],[69,64,63,62],[70,12,64,10,"indexOfMatchedString"],[70,32,64,30],[70,35,64,33,"matches"],[70,42,64,40],[70,43,64,41,"index"],[70,48,64,46],[71,12,66,10],[71,16,66,14],[71,18,66,16,"currentMatches"],[71,32,66,30],[71,35,66,33,"numberOfMatchesPermitted"],[71,59,66,57],[71,61,66,59],[72,14,67,12],[73,14,68,12],[74,12,69,10],[75,12,71,10,"parts"],[75,17,71,15],[75,18,71,16,"push"],[75,22,71,20],[75,23,71,21],[76,14,71,23,"children"],[76,22,71,31],[76,24,71,33,"previousText"],[77,12,71,46],[77,13,71,47],[77,14,71,48],[78,12,73,10,"parts"],[78,17,73,15],[78,18,73,16,"push"],[78,22,73,20],[78,23,74,12],[78,27,74,16],[78,28,74,17,"getMatchedPart"],[78,42,74,31],[78,43,75,14,"pattern"],[78,50,75,21],[78,52,76,14,"matches"],[78,59,76,21],[78,60,76,22],[78,61,76,23],[78,62,76,24],[78,64,77,14,"matches"],[78,71,77,21],[78,73,78,14,"indexOfMatchedString"],[78,93,79,12],[78,94,80,10],[78,95,80,11],[79,12,82,10,"textLeft"],[79,20,82,18],[79,23,82,21,"textLeft"],[79,31,82,29],[79,32,82,30,"substr"],[79,38,82,36],[79,39,82,37,"matches"],[79,46,82,44],[79,47,82,45,"index"],[79,52,82,50],[79,55,82,53,"matches"],[79,62,82,60],[79,63,82,61],[79,64,82,62],[79,65,82,63],[79,66,82,64,"length"],[79,72,82,70],[79,73,82,71],[80,12,83,10,"indexOfMatchedString"],[80,32,83,30],[80,36,83,34,"matches"],[80,43,83,41],[80,44,83,42],[80,45,83,43],[80,46,83,44],[80,47,83,45,"length"],[80,53,83,51],[80,56,83,54],[80,57,83,55],[81,12,84,10],[82,12,85,10,"pattern"],[82,19,85,17],[82,20,85,18,"pattern"],[82,27,85,25],[82,28,85,26,"lastIndex"],[82,37,85,35],[82,40,85,38],[82,41,85,39],[83,10,86,8],[84,10,88,8,"parts"],[84,15,88,13],[84,16,88,14,"push"],[84,20,88,18],[84,21,88,19],[85,12,88,21,"children"],[85,20,88,29],[85,22,88,31,"textLeft"],[86,10,88,40],[86,11,88,41],[86,12,88,42],[87,10,90,8,"newParts"],[87,18,90,16],[87,19,90,17,"push"],[87,23,90,21],[87,24,90,22],[87,27,90,25,"parts"],[87,32,90,30],[87,33,90,31],[88,8,91,6],[88,9,91,7],[88,10,91,8],[89,8,93,6,"parsedTexts"],[89,19,93,17],[89,22,93,20,"newParts"],[89,30,93,28],[90,6,94,4],[90,7,94,5],[90,8,94,6],[92,6,96,4],[93,6,97,4,"parsedTexts"],[93,17,97,15],[93,18,97,16,"forEach"],[93,25,97,23],[93,26,97,25,"parsedText"],[93,36,97,35],[93,40,97,40],[93,47,97,47,"parsedText"],[93,57,97,57],[93,58,97,58,"_matched"],[93,66,97,66],[93,67,97,67],[94,6,99,4],[94,13,99,11,"parsedTexts"],[94,24,99,22],[94,25,99,23,"filter"],[94,31,99,29],[94,32,99,31,"t"],[94,33,99,32],[94,37,99,37],[94,38,99,38],[94,39,99,39,"t"],[94,40,99,40],[94,41,99,41,"children"],[94,49,99,49],[94,50,99,50],[95,4,100,2],[97,4,102,2],[99,4,104,2],[100,0,105,0],[101,0,106,0],[102,0,107,0],[103,0,108,0],[104,0,109,0],[105,0,110,0],[106,0,111,0],[107,4,112,2,"getMatchedPart"],[107,18,112,16,"getMatchedPart"],[107,19,112,17,"matchedPattern"],[107,33,112,31],[107,35,112,33,"text"],[107,39,112,37],[107,41,112,39,"matches"],[107,48,112,46],[107,50,112,48,"index"],[107,55,112,53],[107,57,112,55],[108,6,113,4],[108,10,113,8,"props"],[108,15,113,13],[108,18,113,16],[108,19,113,17],[108,20,113,18],[109,6,115,4,"Object"],[109,12,115,10],[109,13,115,11,"keys"],[109,17,115,15],[109,18,115,16,"matchedPattern"],[109,32,115,30],[109,33,115,31],[109,34,115,32,"forEach"],[109,41,115,39],[109,42,115,41,"key"],[109,45,115,44],[109,49,115,49],[110,8,116,6],[110,12,117,8,"key"],[110,15,117,11],[110,20,117,16],[110,29,117,25],[110,33,118,8,"key"],[110,36,118,11],[110,41,118,16],[110,53,118,28],[110,57,119,8,"key"],[110,60,119,11],[110,65,119,16],[110,97,119,48],[110,99,120,8],[111,10,121,8],[112,8,122,6],[113,8,124,6],[113,12,124,10],[113,19,124,17,"matchedPattern"],[113,33,124,31],[113,34,124,32,"key"],[113,37,124,35],[113,38,124,36],[113,43,124,41],[113,53,124,51],[113,55,124,53],[114,10,125,8],[115,10,126,8,"props"],[115,15,126,13],[115,16,126,14,"key"],[115,19,126,17],[115,20,126,18],[115,23,126,21],[115,29,126,27,"matchedPattern"],[115,43,126,41],[115,44,126,42,"key"],[115,47,126,45],[115,48,126,46],[115,49,126,47,"text"],[115,53,126,51],[115,55,126,53,"index"],[115,60,126,58],[115,61,126,59],[116,8,127,6],[116,9,127,7],[116,15,127,13],[117,10,128,8],[118,10,129,8,"props"],[118,15,129,13],[118,16,129,14,"key"],[118,19,129,17],[118,20,129,18],[118,23,129,21,"matchedPattern"],[118,37,129,35],[118,38,129,36,"key"],[118,41,129,39],[118,42,129,40],[119,8,130,6],[120,6,131,4],[120,7,131,5],[120,8,131,6],[121,6,133,4],[121,10,133,8,"children"],[121,18,133,16],[121,21,133,19,"text"],[121,25,133,23],[122,6,134,4],[122,10,135,6,"matchedPattern"],[122,24,135,20],[122,25,135,21,"renderText"],[122,35,135,31],[122,39,136,6],[122,46,136,13,"matchedPattern"],[122,60,136,27],[122,61,136,28,"renderText"],[122,71,136,38],[122,76,136,43],[122,86,136,53],[122,88,137,6],[123,8,138,6,"children"],[123,16,138,14],[123,19,138,17,"matchedPattern"],[123,33,138,31],[123,34,138,32,"renderText"],[123,44,138,42],[123,45,138,43,"text"],[123,49,138,47],[123,51,138,49,"matches"],[123,58,138,56],[123,59,138,57],[124,6,139,4],[125,6,141,4],[125,13,141,11],[126,8,142,6],[126,11,142,9,"props"],[126,16,142,14],[127,8,143,6,"children"],[127,16,143,14],[127,18,143,16,"children"],[127,26,143,24],[128,8,144,6,"_matched"],[128,16,144,14],[128,18,144,16],[129,6,145,4],[129,7,145,5],[130,4,146,2],[131,2,147,0],[132,2,149,0],[132,6,149,0,"_default"],[132,14,149,0],[132,17,149,15,"TextExtraction"],[132,31,149,29],[133,0,149,30],[133,3]],"functionMap":{"names":["<global>","TextExtraction","constructor","parse","patterns.forEach$argument_0","parsedTexts.forEach$argument_0","parsedTexts.filter$argument_0","getMatchedPart","Object.keys.forEach$argument_0","props.key"],"mappings":"AAA;ACe;ECM;GDG;EEO;0BCE;0BCY;OD6C;KDG;wBEG,0CF;8BGE,mBH;GFC;EMY;wCCG;qBCW,sCD;KDK;GNe;CDC"},"hasCjsExports":false},"type":"js/module"}]}